[Unit]
Description=Concourse CI Worker
Wants=basic.target
After=basic.target network.target
OnFailure=poweroff.target

[Service]
%{ for key, value in environment_vars ~}
Environment=${key}=${value}
%{ endfor ~}

ExecStart=/usr/local/concourse/bin/concourse worker

User=root
Group=root
Type=simple
LimitNPROC=infinity
LimitNOFILE=infinity
TasksMax=infinity
MemoryLimit=infinity
Delegate=yes
KillMode=none

[Install]
WantedBy=default.target
